<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      div {
        width: 50vw;
        margin: auto;
      }
      img {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 50%;
        margin-bottom: 10%;
      }
      canvas {
        margin-top: 10%;
      }
    </style>
  </head>
  <body>
    <div>
      <canvas id="myChart"></canvas>
      <canvas id="myChart2"></canvas>
      <canvas id="myChart3"></canvas>
    </div>

    <img src="Pictures/world.png" alt="svet" id="img" width="50%" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
      const ctx = document.getElementById("myChart");

      new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["1990-2000", "2000-2010", "2010-2015", "2015-2020"],
          datasets: [
            {
              label: "Forest expansion",
              data: [8, 10, 7, 5],
              borderWidth: 1,
              borderSkipped: false,
              borderColor: "rgb(64, 181, 178)",
              backgroundColor: "rgba(64, 181, 178, 0.5)",
            },
            {
              label: "Deforestation",
              data: [-16, -15, -12, -10],
              borderWidth: 1,
              borderSkipped: false,
              borderColor: "rgb(187, 189, 194)",
              backgroundColor: "rgba(187, 189, 194, 0.5)",
            },
          ],
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: "Annual rate of forest expansion and deforestation, 1990 - 2020",
            },
          },
          scales: {
            x: {
              stacked: true,
            },
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: "Million ha per year",
              },
              suggestedMax: 15,
              suggestedMin: -20,
            },
          },
        },
      });

      //   CHART #2
      const ctx2 = document.getElementById("myChart2");

      new Chart(ctx2, {
        type: "bar",
        data: {
          labels: [
            "Not stressed at all",
            "Sometimes stressed", // "Včasih pod stresom",
            "Chronically stressed", // Kronično pod stresom
          ],
          datasets: [
            {
              label: "Forest",
              data: [28, 30, 32],
              borderWidth: 1,
              borderColor: "rgb(187, 189, 194)",
              backgroundColor: "rgba(187, 189, 194, 0.5)",
            },
            {
              label: "Control Group",
              data: [33, 37, 42],
              borderWidth: 1,
              borderColor: "rgb(187, 189, 194)",
              backgroundColor: "rgba(187, 189, 194, 0.1)",
            },
            {
              label: "Difference",
              data: [5, 7, 10],
              borderWidth: 1,
              borderColor: "rgb(45, 142, 229)",
              backgroundColor: "rgba(45, 142, 229, 0.5)",
            },
          ],
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: "Self-reported stress levels are lower when a person is in the forest",
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: "Self-reported stress levels based on STAI score",
              },
              suggestedMax: 12,
            },
          },
        },
      });

      //   CHART #3
      const arrayOfImages = [
        "Pictures/africa.png",
        "Pictures/asia.png",
        "Pictures/europe.png",
        "Pictures/namerica.png",
        "Pictures/oceania.png",
        "Pictures/samerica.png",
        "Pictures/world.png",
      ];

      const ctx3 = document.getElementById("myChart3");

      const myChart3 = new Chart(ctx3, {
        type: "bar",
        data: {
          labels: [
            "Africa",
            "Asia",
            "Europe",
            "North and Central America",
            "Oceania",
            "South America",
            "World",
          ],
          datasets: [
            {
              label: "%",
              data: [27, 25, 6, 11, 16, 31, 18],
              borderWidth: 1,
              borderColor: "rgb(64, 181, 178)",
              backgroundColor: "rgba(64, 181, 178, 0.5)",
            },
          ],
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: "Proportion of forest in protected areas, by region, 2020",
            },
          },
          scales: {
            y: {
              beginAtZero: true,
            },
          },
          indexAxis: "y",
        },
      });

      const img = document.getElementById("img");

      function clickHandler(click) {
        const points = myChart3.getElementsAtEventForMode(
          click,
          "nearest",
          {
            intersect: true,
          },
          true
        );
        if (points.length) {
          //   console.log(points[0].index);
          //   img.src = arrayOfImages[points[0].index];
          document.getElementById("img").src = arrayOfImages[points[0].index];
        }
      }

      myChart3.canvas.onclick = clickHandler;
    </script>
  </body>
</html>
